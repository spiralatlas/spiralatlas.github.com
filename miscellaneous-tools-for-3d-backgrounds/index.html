<!DOCTYPE html>
<html lang="en">
<head>



  <!-- https://github.com/joshbuchea/HEAD -->
  
  <!-- Recommended -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Meta -->
  <meta name="description" content="Small Australian creator of visual novels and other diversions." />
  <meta name="author" content="Sean Atlas" />
  <meta name="generator" content="Eleventy">

  <!-- Link -->
  <link rel="alternate" href="" type="application/rss+xml" title="RSS">

  <!-- Icons -->
  <!-- https://favicon.io/favicon-generator/?t=CM&ff=Open+Sans&fs=75&fc=%23FFFFFF&b=rounded&bc=%23dc3545 -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">

  <!-- Social -->

  <!-- Facebook -->
  <meta property="og:url" content="https://spiralatlas.github.io/miscellaneous-tools-for-3d-backgrounds/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Miscellaneous Tools for 3D Backgrounds">
  <meta property="og:description" content="Small Australian creator of visual novels and other diversions.">
  <meta property="og:site_name" content="Spiral Atlas Games">
  <meta property="og:locale" content="en_AU">
  <meta property="article:author" content="Sean Atlas">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@spiral_atlas">
  <meta name="twitter:url" content="https://spiralatlas.github.io/miscellaneous-tools-for-3d-backgrounds/">
  <meta name="twitter:title" content="Miscellaneous Tools for 3D Backgrounds">
  <meta name="twitter:description" content="Small Australian creator of visual novels and other diversions.">

  <title>Miscellaneous Tools for 3D Backgrounds</title>


  <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:300,700|Material+Icons:400&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,700|Material+Icons:400&display=swap"></noscript>

  <link rel="stylesheet" href="/site.css" />
</head>

<body class="text-gray-700 bg-gray-100 dark:bg-gray-900 dark:text-gray-300">

  <nav class="flex flex-no-wrap justify-between max-w-5xl mx-auto">

  <a class="flex-1" href="https://spiralatlas.github.io/">Spiral Atlas Games</a>

  <ul class="flex items-center justify-end flex-1">

    <li class="px-3 md:px-6"><a id="toggle" aria-label="light dark toggle" class="text-gray-700 dark:text-gray-400 hover:text-gray-400 dark:hover:text-gray-700" href="#">
      <i id="pref" class="align-middle material-icons">brightness_4</i>
      <i id="moon" class="hidden align-middle material-icons">brightness_2</i>
      <i id="sun" class="hidden align-middle material-icons">brightness_5</i>
    </a></li>

    
      <li class="px-3"><a class="uppercase" href="/">Home</a></li>
    
      <li class="px-3"><a class="uppercase" href="/about">About</a></li>
    
      <li class="px-3"><a class="uppercase" href="/blog">Blog</a></li>
    
      <li class="px-3"><a class="uppercase" href="/tags">Tags</a></li>
    
  </ul>

</nav>


  <main class="max-w-5xl mx-auto prose dark:prose-dark">
<h1>Miscellaneous Tools for 3D Backgrounds</h1>
<p>Tags: 


<a href="/tags/posts/" class="post-tag">posts</a>,


<a href="/tags/tutorial/" class="post-tag">tutorial</a>,


<a href="/tags/blender/" class="post-tag">blender</a>,


<a href="/tags/art/" class="post-tag">art</a>,
 
</p>
<time datetime="2025-09-18"> 18 Sep 2025</time>

<p>This is a companion to <a href="https://spiralatlas.itch.io/miscellaneous-tools-for-3d-backgrounds">this collection of tools I made for making 3D backgrounds</a>, and contains a pretty bare bones description of what these tools do and how to use them.</p>
<p>If you're not familiar with running python scripts, I reccomend looking up a tutorial, here's some I found via a quick search:</p>
<ul><li><a href="https://learnpython.com/blog/run-python-script-windows/">How to Run a Python Script in Windows</a> (for combine_fotosketcher.py)
<li><a href="https://www.lowpolymodelsworld.com/post/blender-scripting-for-beginners-a-step-by-step-guide">Blender Scripting for Beginners: A Step-by-Step Guide</a> (for render_cameras.py and toon_shader_process.py)</ul>
<h2>Batch Processing with Fotosketcher and Python with combine_fotosketcher.py</h2>
<p>This technique takes a folder of images, and for each image adds layers of masked fotosketcher filters. Images must all be 1920x1080. You will need to install <a href="https://pillow.readthedocs.io/en/stable/installation/basic-installation.html">pillow</a>.</p>
<p>I described a similar, non-automated technique in <a href="https://spiralatlas.github.io/tutorial:-post-processing-3d-renders/">Tutorial: Post Processing 3D Renders</a>.</p>
<p>For this example I'll describe how to process images in the &quot;diner&quot; folder.</p>
<h3>Folder Setup</h3>
<p>Within the main folder, there's the script combine_fotosketcher.py and the following subfolders:</p>
<ul><li>originals/: unfiltered images. Divided up into subfolders of collections of images, eg "diner".
<li>masks/: contains "w.png", "o.png", "w2.png", semi-transparent pngs with a painted texture.
<li>w/: where watercolour 1 filtered images are saved
<li>w2/: where watercolour 3 filtered images are saved
<li>o/: where oil paint filtered images are saved
<li>combined/: Finished images. Divided up into subfolders, eg "diner".</ul>
<h3>Batch processing in Fotosketcher</h3>
<p>To create the images in the w folder:</p>
<ol><li>Choose "File: Batch Processing", select all images in "originals/diner". Set output folder to w. Select "overwrite existing images". 
<li>Choose first watercolour filter. </ol>
<p>Similarly save the third watercolour filter in w2, and the oil paint filter in o.</p>
<p>For each image img.jpg, this will save images called img_Fotosketcher.jpg in w, w2, and o.</p>
<h3>Run the script</h3>
<p>Making sure you have python3 installed, open a console (for example in Visual Studio Code) and run &quot;python3 combine_fotosketcher.py&quot;.</p>
<p>For each img.jpg in diner/ this will layer the original img.jpg, then the images img_Fotoskletcher.jpg in w, w2 and o2, using the masks in masks/. The result will be saved as combined/diner/img.jpg.</p>
<h2>Python scripting in Blender</h2>
<p>Blender Python scripts can be used to do basically anything the user can do, in terms of editing, setting up nodes, rendering and saving, etc. They can be very useful for automation of repetitive tasks. Unfortunately <a href="https://docs.blender.org/api/current/info_quickstart.html">the documentation</a> is pretty sparse and confusing so I've mostly had to rely on finding other people's scripts to do similar things to what I want and then editing from there.</p>
<p>Running a python script is easy: Open up the text editor, load or create a python script, and then click the &quot;play&quot; button. Make sure the &quot;fake user&quot; option is selected so that it is saved when you close Blender.</p>
<h2>Adding Toon Shaders To Imported glTF Meshes with toon_shader_process.py</h2>
<p>The script toon_shader_process.py goes through all the materials in a collection and adds a toon shader and a few other changes. It's designed to work on imported glTF meshes. Unfortunately there's a few kinds of glTF mesh it doesn't work on very well, and in general I still go through each material and tweak it to look good. But it speeds up the most common tasks.</p>
<h3>Setup</h3>
Append from "toon script.blend":
<ul>
<li> The text file toon_shader_process.py
<Li> The node group "toon" which converts the output from a shader into toon shading. 
<li> The node group "convert roughness" which flattens out the metallic and roughness inputs. 
</ul>
<h3>Types of Material The Script Works On</h3>
<p>The script assume input in PBR format, specifically the kind of output you get from imported glTF files. <a href="https://spiralatlas.github.io/3d-formats-for-blender:-pbr-and-gltf/">See this post for more info</a>.</p>
<p>Specifically, we have a bunch of inputs into a Principle BDSF Shader: a BASE IMAGE piped into Color, a ROUGHNESS METALLIC image split into rgb before being piped into roughness and metallic, and a Normal image piped in via a Bump Map.</p>
<img src = "../images/lowreslounge/glTF.jpg" alt="all the node names are in all caps">
<p>It works if there's no ROUGHNESS METALLIC or NORMAL images, or a flat colour instead of BASE IMAGE. But it will not take into account alpha or emission data, and doesn't correctly work for color information inputted in any form other than a BASE IMAGE.</p>
<h3>What the script does</h3>
<ul><li>puts a "toon" group between the Principle BDSF and Material Output nodes
<li>Move the BASE IMAGE from the Color input of the Principle BDSF Shader to the toon group.
<li>Replaces any Separate RGB node with a "convert roughness" group.
<li>Lowers any normal map strength to 0.1</ul>
<h3>Running the script</h3>
<p>Make a collection containing all the meshes you want to convert, and select it. In the text editor, open toon_shader_process.py and click the run script button.</p>
<p>You can test this out in &quot;toon script.blend&quot; on the folder &quot;test script on this folder&quot;.</p>
<p>It shouldn't cause problems to run the script over a mesh twice but I make no promises &gt;.&gt;</p>
<h3>Fixing errors</h3>
<p>If there's alpha data input: Remove this input from the Principled BDSF and use it as the factor in a Mix Shader, mixing the output of toon with a transparent Shader.</p>
<p>If there's emission data input: Remove this input from the Principled BDSF and use it as the factor in a Mix Shader, mixing the output of toon with an Emission Shader. See &quot;toon script.blend&quot; for an example.</p>
<p>If there's Color input that's not a Base Image: Remove this input from the Principled BDSF and connect it to the Color input of toon.</p>
<p>There may be other kinds of errors but these are the main ones I encounter.</p>
<h3>Improving the appearance</h3>
<p>Use the kinds of techniques described in <a href="https://spiralatlas.github.io/more-on-toon-shading/">More On Toon Shading</a>. It can also look good to mix in some of the sorts of gradients used in <a href="https://spiralatlas.github.io/making-a-low-res-environment-in-blender/">Making A Low Res Environment In Blender</a>.</p>
<h2>Rendering multiple outputs from multiple cameras</h2>
<p>NOTE: There's more efficient ways of doing most of this in Blender 5. See <a href="https://spiralatlas.github.io/multiple-file-outputs-in-blender-5.0/">Multiple File Outputs in Blender 5.0</a>.</p>
<p>This goes through all the cameras in a selected Collection and saves the render, lines, mist, and ambient occlusion to separate folders. Unfortunately I can't figure out how not to have the frame number added to the end of every image.</p>
<p>It does this via the compositor, so may mess up any existing compositor nodes.</p>
<h3>Setup</h3>
<ul><li>In "Render Settings" turn on Freestyle and Film -> Transparency. 
<li>In "View Layer" turn on Mist and Ambient Occlusion. Scroll down to Freestyle Settings. Click "Render as render Layer". 
<li>Tweak the Freestyle Settings to your personal taste. 
<li>Add "render_cameras.py". Edit the "path" variable to save in the folder you want, and "current folder" to whatever image set is being edited, eg "diner". 
<li>Select "Use nodes" in the compositor.
</ul>
<h3>How I set up my freestyle lines</h3>
<p>Two line styles: Outline, and Internal Lines.</p>
<p>Both have two Stroke Width modifiers which multiply the width by curves. One modifier is along the stroke, curving from zero to one to zero again.
The other is &quot;Distance from camera&quot;, curving from 1 when the distance is zero to zero when the distance is around 20, depending on the scene.
<img src="../images/house_backgrounds/freestyle.jpg" width=500></p>
<p>Outline is thicker (3-4 px) but only uses Sillouhette. Internal Lines is thinner (2-3px) and uses Sillouhette, Crease, and Border.</p>
<p>Sometimes I make Internal Lines lower opacity but this can make my computer crash.</p>
<h3>Running the Script</h3>
Put the cameras you want to render with into a collection, then select it. 
<p>In the text editor, open &quot;render_cameras.py&quot; and run it. This will set up the compositor and then render and save all the images into images named after each camera and in folders names lines/ao/renders/mist.</p>
<p>After this, if you want to tweak your scene and rerender without resetting the compositor, comment out the line &quot;setup()&quot; in render_cameras.py.</p>
<p>The script saves the following files:</p>
<p>Render:
<img src="../images/vicstreet/draft2.jpg"></p>
<p>Lines:
<img src="../images/vicstreet/lines og.jpg"></p>
<p>Mist (distance from camera):
<img src="../images/vicstreet/mist og.jpg"></p>
<p>Ambient Occlusion/ao (corner shadows):
<img src="../images/vicstreet/ao.jpg"></p>
<p>In future I may also save the Bloom which makes light sources and bright areas glow.</p>


</main>


  <footer class="text-center">

  <ul class="flex justify-center my-10">
    
    <li class="px-5 sm:px-10"><a href="https://mastodon.gamedev.place/@spiralatlas" aria-label="mastodon">
      <div class="text-2xl text-gray-500"><svg width="24" height="24" data-icon="mastodon" viewbox="0 0 24 24"><path fill="currentColor" d="M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611.118 1.24.325 2.47.62 3.68.55 2.237 2.777 4.098 4.96 4.857 2.336.792 4.849.923 7.256.38.265-.061.527-.132.786-.213.585-.184 1.27-.39 1.774-.753a.057.057 0 0 0 .023-.043v-1.809a.052.052 0 0 0-.02-.041.053.053 0 0 0-.046-.01 20.282 20.282 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.593 5.593 0 0 1-.319-1.433.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546.376 0 .75 0 1.125-.01 1.57-.044 3.224-.124 4.768-.422.038-.008.077-.015.11-.024 2.435-.464 4.753-1.92 4.989-5.604.008-.145.03-1.52.03-1.67.002-.512.167-3.63-.024-5.545zm-3.748 9.195h-2.561V8.29c0-1.309-.55-1.976-1.67-1.976-1.23 0-1.846.79-1.846 2.35v3.403h-2.546V8.663c0-1.56-.617-2.35-1.848-2.35-1.112 0-1.668.668-1.67 1.977v6.218H4.822V8.102c0-1.31.337-2.35 1.011-3.12.696-.77 1.608-1.164 2.74-1.164 1.311 0 2.302.5 2.962 1.498l.638 1.06.638-1.06c.66-.999 1.65-1.498 2.96-1.498 1.13 0 2.043.395 2.74 1.164.675.77 1.012 1.81 1.012 3.12z" /></svg></div>
    </a></li>
    
    <li class="px-5 sm:px-10"><a href="https://twitter.com/spiral_atlas" aria-label="twitter">
      <div class="text-2xl text-gray-500"><svg width="24" height="24" data-icon="twitter" viewbox="0 0 24 24"><path fill="currentColor" d="M21.543 7.104c.015.211.015.423.015.636 0 6.507-4.954 14.01-14.01 14.01v-.003A13.94 13.94 0 0 1 0 19.539a9.88 9.88 0 0 0 7.287-2.041 4.93 4.93 0 0 1-4.6-3.42 4.916 4.916 0 0 0 2.223-.084A4.926 4.926 0 0 1 .96 9.167v-.062a4.887 4.887 0 0 0 2.235.616A4.928 4.928 0 0 1 1.67 3.148 13.98 13.98 0 0 0 11.82 8.292a4.929 4.929 0 0 1 8.39-4.49 9.868 9.868 0 0 0 3.128-1.196 4.941 4.941 0 0 1-2.165 2.724A9.828 9.828 0 0 0 24 4.555a10.019 10.019 0 0 1-2.457 2.549z" /></svg></div>
    </a></li>
    
    <li class="px-5 sm:px-10"><a href="https://spiralatlas.tumblr.com/" aria-label="tumblr">
      <div class="text-2xl text-gray-500"><svg width="24" height="24" data-icon="tumblr" viewbox="0 0 24 24"><path fill="currentColor" d="M14.563 24c-5.093 0-7.031-3.756-7.031-6.411V9.747H5.116V6.648c3.63-1.313 4.512-4.596 4.71-6.469C9.84.051 9.941 0 9.999 0h3.517v6.114h4.801v3.633h-4.82v7.47c.016 1.001.375 2.371 2.207 2.371h.09c.631-.02 1.486-.205 1.936-.419l1.156 3.425c-.436.636-2.4 1.374-4.156 1.404h-.178l.011.002z" /></svg></div>
    </a></li>
    
    <li class="px-5 sm:px-10"><a href="https://github.com/spiralatlas" aria-label="github">
      <div class="text-2xl text-gray-500"><svg width="24" height="24" data-icon="github" viewbox="0 0 24 24"><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" /></svg></div>
    </a></li>
    
  </ul>

</footer>


  <script src="/themetoggle.js"></script>
  <script async src="/topscroll.js"></script>
  
</body>
</html>
